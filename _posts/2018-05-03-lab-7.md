---
title: "Classifier 2"
header:
  teaser: /assets/images/Lab7.png
categories:
  - Digital Signal Processing
tags:
  - tone shifting
  - fourier
  - peak power
toc: true
---

# Introduction
In this project we use Fourier transforms, power specs, peak power, and chroma shifting to create a different type of classifier to identify the genre of music tracks. 

<figure>
	<a href="/assets/images/Lab7.png"><img src="/assets/images/Lab7.png"></a>
</figure>

# Main Project

## Part 1: Short Time Fourier Transform

Below are the figures generated using the function with the Hann window. The code used to generate the plots is found in the appendix at the end of the report. Comments on the results of each track for the stft are given above each figure. Comments for the rest of the figures in the report will also use the Hann window. Stft takes in the sampled signal as well as which window will be used. The Hann window in the case of this report, but the Kaiser and Blackman window could be used as well by changing the second argument of the function. The function produces a time-frequency matrix where each column of the matrix is the frequency response of 1024 sample section of a song, and the sections overlap by 768 samples each. All songs are analyzed individually in the following section. 

For track201-classical.wav we can see that there are many different notes being played which makes sense as this is piece is better known as Violin Concerto No. 1 in A minor by Bach. This makes sense for a concerto, as the definition of a concerto is a musical piece where there is a main instrument, which in this case is a violin, accompanied by an orchestra which can include many different instruments. It can be seen that the main spots of red at lower frequencies is likely the steady beat and harmony that can be heard from the cello, while the higher frequencies are the melodies of the first set of violins and the overtones of the second set of violins. It is also important to note that while it is not as noticeable to the ear, the chart shows as slight decrease in frequency as time goes on which can likely be attributed to the nature of string instruments as the vibrations caused between the string and the bow can cause the string to loosen, thus generating lower frequencies than intended. 

![Figure71]({{ site.url }}/assets/images/figure7-1.PNG)

In track204-classical.wav, the melody can be clearly seen as there is only one instrument playing which is a piano. As this is just a standard etude (practice exercise) the track follows a very standard pattern of increasing frequencies and then decreasing frequencies. We can see some spikes in frequency as the etude isn’t completely boring and does scale up to some harmonics of the same note. The main takeaway is that it is easy figure out the melody of a song when there is only one instrument and the structure is very regimented as this etude is designed for a pianist to practice their arpeggios (set of notes played in an increasing frequency and then decreasing frequency corresponding to the intended melody for a song). 

![Figure72]({{ site.url }}/assets/images/figure7-2.PNG)

For track370-electronic.wav, it is just a random jumble of electronic sounds put together and from the chart we can see that as there is not really set structure, and there just seems to be noise at a wide variety of frequencies. It is unclear what the user should be listening to as there seems to be what sounds like drums tapping in quick succession, but it is generally overshadowed by the very electronic and unnatural sounds which vary a lot in frequency even just for less than a second of time. 

![Figure73]({{ site.url }}/assets/images/figure7-3.PNG)

Track396-electronic.wav has a very strong bass in the background which can be seen by all the red at low frequencies, it does however cut out around 120 seconds which does make sense as there is only the woman singing at that point in the song. As for the light red at higher frequencies, this can either be attributed to the woman’s voice of the other electronic instrumentation heard throughout the song that generates the melody. There is very quick switching between notes for the melody which is the primary reason that there seems to be a lot of noise for short periods of time. 

![Figure74]({{ site.url }}/assets/images/figure7-4.PNG)

In this jazz track we can hear something that sounds like a synthesizer and steady drums and symbols in the background. There is somewhat of a structure to the synthesizer which looks to repeat every 15 seconds, which makes sense as the musician uses the same series of 5 notes very often throughout the track. Near the end the structure seems to be loss which can be heard in the song as the musician decides to show off their skills and abandon the structure that was set at the beginning of the track. 

![Figure75]({{ site.url }}/assets/images/figure7-5.PNG)

For this jazz track, again the synthesizer seems to hold a steady pattern, but it is most difficult to see in this chart as the song is higher tempo (more fast-paced) as the drums are more high energy. Between 90 and 120 seconds the track seems to lose it’s rhythm which can be heard as the synthesizer start to vary it’s notes quite a bit and the drums become very soft. But the track pick right back up to the original rhythm right after. 

![Figure76]({{ site.url }}/assets/images/figure7-6.PNG)

For this metal track, there is a clear bass throughout the song, and a vocalist singing the melody. Looking at the Fourier transform, no real structure cannot be seen for this track, which is common in metal music and there is a lot of noise, but the rhythm is difficult to figure out as the bass keeps constantly changing the tempo of the song pretty sporadically. The song does seem to cover a wide range of frequencies as the majority of the plot is orange and red signifying a wide range of harmonics. 

![Figure77]({{ site.url }}/assets/images/figure7-7.PNG)

This metal track seems to have even more noise, and even though the bass seems to have a bit more structure than the previous track, but the structure does not retain after 30 seconds in the song. The plot is even more red than the previous range, which means every harmonic is equally strong which is quite impressive from this musician. From 60 to 90 seconds we can see some ripples, which could be attributed to the slides that can be heard in this area where it seems like an electric guitar is just sliding their finger quickly down the frets (lines on guitar to determine what note is played) to produce this unique sound. 

![Figure78]({{ site.url }}/assets/images/figure7-8.PNG)

In this rock track there seems to be a standard 4 notes that are played throughout the song which gives a structure in the lower frequencies that can kind of be seen, but since the 4 notes seem to happen at random intervals they are a bit difficult to see in the plot. At higher frequencies, we can see the woman’s voice as well as the harmonics that are produced with the other instruments in the background. 

![Figure79]({{ site.url }}/assets/images/figure7-9.PNG)

In this rock track, the structure is clear to see with the ukulele like instrument in the background as it plays a very melodic line that is easy to follow, the structure is more difficult to follow around 45 to 75 seconds and 110 and 155 seconds due to the woman’s voice and the additional harmonics which shows in the plot, but it is still pretty clear and there is just more noise which makes sense with the woman’s voice and ukulele going at the same time. 

![Figure710]({{ site.url }}/assets/images/figure7-10.PNG)

For this world track, the plot shows there is not much at the beginning which makes sense as it is just the running stream of water in the background. As the track goes on a flute is introduced which produces a steady tone, which can be seen by the dark red sections as low frequencies throughout the song. There is not much else in the song which the plot represents so we can safely say this plot is correct.

![Figure711]({{ site.url }}/assets/images/figure7-11.PNG)

For this world track we can see a steady structure in the plot, which can also be heard in the song. There are also clear harmonics which makes sense as it is just a couple instruments in the background. The song mostly follows the same structure throughout with some changes in frequency in the plot. Even though the sounds produces in the track might not be the most appealing to listen to, one can still hear a clear melody being played which is reflected in the plot.

![Figure712]({{ site.url }}/assets/images/figure7-12.PNG)

## Part 2: Power Spectroscopy 

Below are the plots generated by pspec. The code used to generate the plots is found in the appendix at the end of the report. Pspec takes in the sampled signal which is to be plotted. To change which window is used the second argument of stft inside the pspec function can be changed. The structure of these plots is very similar to those produced by stft. By squaring each data point the large values become larger and the small values become smaller making it easier to see where the salient features of each song are. All songs are analyzed individually in the following section and comments for the figures generated by pspec are included above each figure. 

In the power spec of track201-classical it can be seen that the song is centered around 50 Hz and harmonics of that frequency. This frequency is likely the note A, as the scale(series of notes the song is centered around) is A minor. 

![Figure713]({{ site.url }}/assets/images/figure7-13.PNG)

In track204-classical we can see that the power spec is centered around the notes that go up in frequency and less on the notes that going down in frequency. After listening to the song this makes sense as the volume of notes seems to increase proportionally to frequency as the frequency increases, and the volume also decreases when the pianist goes from high frequencies to low frequencies. 

![Figure714]({{ site.url }}/assets/images/figure7-14.PNG)

In track370-electronic we still see that the music is pretty random in the power spec plot. There is still a lot of noise throughout the track, with the track being very corrupted around 120 seconds to the end of the track. The beginning of the song seems to have lots of harmonics which makes sense for an electronic track, as well as some before the track gets corrupted which can kind of be heard, but not too well with all the other noise in the track. 

![Figure715]({{ site.url }}/assets/images/figure7-15.PNG)

Looking at the power spec of track306-electronic, the bass in the background is very clear to see, and there seems to be a lot of harmonics for different frequencies which explains the music sounding like there are many notes being played at once, as well as the woman's voice which likely has some vibrato(slight change in pitch in singer's voice) to generate the ripples seen below. 

![Figure716]({{ site.url }}/assets/images/figure7-16.PNG)

For track437-jazz, we can see that most of the track resides in the low frequencies which is noticeable, with a small spike at higher frequencies which can be attributed to the light brass sound from the symbols that are part of the drum set. 

![Figure717]{{ site.url }}/assets/images/figure7-17.PNG)

In track439-jazz the story is very similar to the previous track with most of the frequencies being on the low end on the synthesizer that starts the track, and small spikes at higher frequencies, and almost no high freqencies from 90 to 120 seconds as it is mostly just the syntheziser that can be heard. 

![Figure718]{{ site.url }}/assets/images/figure7-18.PNG)

Track463-metal still seems to be quite a mess, but at least with the power spec plot we can see a steady bass and potentially some harmonics throughout the song, but this still doesn't change the fact that it is very noisy in most places and the song doesn't have much structure. 

![Figure719]{{ site.url }}/assets/images/figure7-19.PNG)

Track492-metal is similar to the previous metal track in that it also has a lot of noise which makes it difficult to make any clear comments of what is important in the song. It seems there is heavy bass again, but all other frequencies are all over the place which makes sense as metal music has many varying notes being played at high tempos. 

![Figure720]{{ site.url }}/assets/images/figure7-20.PNG)

In the power spec plot for track 547-rock we can see a lot of the song centered between 0 and 50 Hz which is likely consistent of the woman's voice and some of the instruments and then further harmonics at higher frequencies likely produced from the instruments in the track. 

![Figure721]{{ site.url }}/assets/images/figure7-21.PNG)

For track550-rock we can cleary see the rhythmic structure of the track and where at 45 and 120 seconds the woman's voice comes in as well as the harmonics generated from this. This track is a lot easier to follow in the power spec plot than that of the metal tracks above. 

![Figure722]{{ site.url }}/assets/images/figure7-22.PNG)

For track707-world we can now clearly see where the flute changes harmonics and it is very clear what pitch the flute is playing at specific times through the power spec plot. However, we lose a lot of the features of the flowing water in the background with the power spec plot. 

![Figure723]{{ site.url }}/assets/images/figure7-23.PNG)

For track729-world we can see from the power-spec plot that the song is very low frequency with only a couple more harmonics that can be clearly heard in the track. We can see a light rhythmic structure but not cleary, as there is quite a bit going on throught the song to define this absolutely. 

![Figure724]{{ site.url }}/assets/images/figure7-24.PNG)

## Parts 3 and 4: Peak Power

Below are the plots for peakpwr. The code used to generate the plots is found in the appendix at the end of the report. Peakpwr takes in the sampled signal being plotted. Only the cell with the maximum value is preserved in each column, this is the most prominent frequency in this section of 1024 samples. We only look at frequencies under 70 Hz in our plots as most of the maximums are between the range of 0-70 Hz. All songs are analyzed individually in the following section and comments for the figures generated by peakpwr are included above each figure.




